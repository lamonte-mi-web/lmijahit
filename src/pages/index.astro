---
// File: src/pages/index.astro
import Layout from "../layouts/LMIlayout.astro";
import AboutSection from "../components/sections/AboutSection.astro";
import GallerySection from "../components/sections/GallerySection.astro";
import ServiceSection from "@/components/sections/ServiceSection.astro";
import MaterialSection from "@/components/sections/MaterialSection.astro";
import WorkSection from "@/components/sections/WorkSection.astro";
import FeaturesSection from "@/components/sections/FeaturesSection.astro";
import BookSection from "@/components/sections/BookSection.astro";
import TestimonialsSection from "@/components/sections/TestimonialsSection.astro";
import CTASection from "@/components/sections/CTASection.astro";
import ClientSection from "@/components/sections/ClientSection.astro";
import SizeSection from "@/components/sections/SizeSection.astro";
import FAQSection from "@/components/sections/FAQSection.astro";

// Impor semua komponen bagian yang akan Anda gunakan di halaman ini
//import HeroSlider from '../components/HeroSlider.astro';
//import AboutSection from '../components/AboutSection.astro';
//import ServiceSection from '../components/ServiceSection.astro';
//import BookingFormSection from '../components/BookingFormSection.astro';
// ...impor komponen lainnya jika Anda membuatnya
---

<Layout title="Mitra Pengadaan Seragam No 1 di Indonesia | Lamonte Costum">
	<div class="site-preloader-wrap">
		<div class="spinner"></div>
	</div>

	<div id="main-slider" class="dl-slider">
		<div class="single-slide">
			<div
				class="bg-img kenburns-top-right"
				style="background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(/assets/img/slider-1.jpg?v=1);"
			>
			</div>
			<div class="slider-content-wrap d-flex align-items-center text-left">
				<div class="container">
					<div class="slider-content">
						<div class="dl-caption big">
							<div class="inner-layer">
								<div
									data-animation="fade-in-left"
									data-delay="1s"
									style="text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;"
								>
									Baju Custom Eksklusif, <br />Pas di Hati dan Ukuran
								</div>
							</div>
						</div>
						<div class="dl-caption small">
							<div class="inner-layer">
								<div
									data-animation="fade-in-left"
									data-delay="2s"
									style="color:white;"
								>
									Rasakan pengalaman menjahit baju sesuai selera, gaya, dan
									kebutuhanmuâ€”tanpa ribet!
								</div>
							</div>
						</div>
						<div class="dl-btn-group custom-btn-wrapper">
							<div class="inner-layer">
								<a
									href="#"
									class="custom-btn"
									data-animation="fade-in-left"
									data-delay="3.5s"
								>
									Lihat Katalog<span></span><i class="ti-angle-right ml-2"
									></i></a
								>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="single-slide">
			<div
				class="bg-img kenburns-top-right"
				style="background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(/assets/img/slider-2.jpg?v=1);"
			>
			</div>
			<div class="slider-content-wrap d-flex align-items-center text-left">
				<div class="container">
					<div class="slider-content">
						<div class="dl-caption big">
							<div class="inner-layer">
								<div
									data-animation="fade-in-left"
									data-delay="1s"
									style="text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;"
								>
									Dari Seragam<br /> Hingga Gaun Pesta
								</div>
							</div>
						</div>
						<div class="dl-caption small">
							<div class="inner-layer">
								<div
									data-animation="fade-in-left"
									data-delay="2s"
									style="color:white;"
								>
									Terima pesanan seragam kantor, baju nikah, kebaya, hingga jas
									formal. Semua bisa disesuaikan!
								</div>
							</div>
						</div>
						<div class="dl-btn-group custom-btn-wrapper">
							<div class="inner-layer">
								<a
									href="https://bit.ly/LMI-konsultasi"
									target="_blank"
									class="custom-btn"
									data-animation="fade-in-left"
									data-delay="3.5s"
									>Konsultasi Gratis<span></span><i class="ti-angle-right ml-2"
									></i></a
								>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- slider end -->
		<div class="single-slide">
			<div
				class="bg-img kenburns-top-right"
				style="background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(/assets/img/slider-3.jpg?v=1);"
			>
			</div>
			<div class="slider-content-wrap d-flex align-items-center text-left">
				<div class="container">
					<div class="slider-content">
						<div class="dl-caption big">
							<div class="inner-layer">
								<div
									data-animation="fade-in-left"
									data-delay="1s"
									style="text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;"
								>
									1000+ Pelanggan<br /> Puas di Seluruh Indonesia
								</div>
							</div>
						</div>
						<div class="dl-caption small">
							<div class="inner-layer">
								<div
									data-animation="fade-in-left"
									data-delay="2s"
									style="color:white;"
								>
									Bergabunglah dengan ratusan pelanggan yang sudah merasakan
									layanan jahit terbaik dari kami.
								</div>
							</div>
						</div>
						<div class="dl-btn-group custom-btn-wrapper">
							<div class="inner-layer">
								<a
									href="#"
									class="custom-btn"
									data-animation="fade-in-left"
									data-delay="3.5s"
									>Baca Testimoni<span></span><i class="ti-angle-right ml-2"
									></i></a
								>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- why us -->
	<AboutSection />

	<!-- pelayanan -->
	<ServiceSection />
	<!-- Material -->
	<MaterialSection />

	<!-- Features -->
	<FeaturesSection />

	<!-- Gallery -->
	<GallerySection />

	<!-- Process -->
	<WorkSection />

	<!-- Testimonials -->
	<TestimonialsSection />

	<!-- client Section -->
	<ClientSection />

	<!-- Size Section -->
	<SizeSection />
	
	<!-- Size Section -->
	<FAQSection />
	
	<!-- Book Section -->
	<BookSection />

	<!-- Cta section -->
	<CTASection />


	<script>
		const form = document.getElementById(
			"consultation-form"
		) as HTMLFormElement;
		const nameInput = document.getElementById("name") as HTMLInputElement;
		const waInput = document.getElementById("wa") as HTMLInputElement;
		const formMessages = document.getElementById(
			"form-messages"
		) as HTMLElement;
		const submitButton = document.getElementById("submit") as HTMLButtonElement;

		if (form && nameInput && waInput && formMessages && submitButton) {
			form.addEventListener("submit", async function (event) {
				event.preventDefault();
				formMessages.textContent = "";
				formMessages.className = "alert";

				const nameValue = nameInput.value.trim();
				const waValue = waInput.value.trim();

				if (nameValue.length < 5) {
					formMessages.textContent = "Nama harus minimal 5 karakter.";
					formMessages.className = "alert alert-danger";
					return;
				}
				if (!/^[A-Za-z\s]+$/.test(nameValue)) {
					formMessages.textContent = "Nama hanya boleh huruf dan spasi.";
					formMessages.className = "alert alert-danger";
					return;
				}
				if (!/^(08\d{8,11}|628\d{7,10})$/.test(waValue)) {
					formMessages.textContent =
						"Nomor WA tidak valid. Awali dengan 08 atau 628.";
					formMessages.className = "alert alert-danger";
					return;
				}

				submitButton.textContent = "Mengirim...";
				submitButton.disabled = true;

				try {
					const response = await fetch("/api/kirim-whatsap", {
						method: "POST",
						headers: {
							"Content-Type": "application/json",
						},
						body: JSON.stringify({
							name: nameValue,
							wa: waValue,
						}),
					});

					const result = await response.json();

					if (response.ok) {
						formMessages.textContent = result.message;
						formMessages.className = "alert alert-success";
						form.reset();
					} else {
						throw new Error(result.message);
					}
				} catch (error) {
					formMessages.textContent =
						error instanceof Error
							? "Error: " + error.message
							: "Error tidak diketahui.";
					formMessages.className = "alert alert-danger";
				} finally {
					submitButton.textContent = "Kirim";
					submitButton.disabled = false;
				}
			});
		} else {
			console.error("Form atau input tidak ditemukan.");
		}
	</script>
</Layout>
