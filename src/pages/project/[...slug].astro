---
// src/pages/blog/[...slug].astro

// 1. IMPORT DEPENDENSI
// Hanya import yang benar-benar dibutuhkan.
export const prerender = true;
//import type { GetStaticPaths } from "astro";
import { getCollection } from "astro:content";
import Layout from "../../layouts/LMIlayout.astro"; // Pastikan path ini benar menuju Layout Anda
// 2. GETSTATICPATHS
// Fungsi ini wajib untuk memberitahu Astro halaman mana yang harus dibuat.
// Strukturnya harus persis seperti ini.
//const date = Date();
let date = new Date().toLocaleDateString();
console.log(date); // 6/17/2022

export async function getStaticPaths() {
    const blogPosts = await getCollection("project");

    return blogPosts.map((post) => {
        return {
            params: { slug: post.slug },
            props: { post: post },
        };
    });
}

// 3. AMBIL PROPS DAN RENDER KONTEN
// Mengambil 'post' yang dikirim dari getStaticPaths.
const { post } = Astro.props;
// 'post.render()' adalah fungsi yang mengubah file .md/.mdx Anda menjadi HTML.
const { Content } = await post.render();
---

<Layout title={post.data.title} description={post.data.description}>
    <section class="blog-section padding">
        <div class="container">
            <div class="blog-wrap row">
                <div class="col-lg-8 padding-15">
                    <div class="blog-single-wrap">
                        <div class="blog-thumb">
                            <img
                                src={post.data.ogImage}
                                alt="img"
                                height="300"
                                style="width: 100%; height: 300px; object-fit: cover;"
                            />
                        </div>
                        <div class="blog-single-content">
                            <h2><a href="#">{post.data.title}</a></h2>
                            <ul class="single-post-meta">
                                <li>
                                    <i class="fas fa-user"></i>
                                    <a href="#">Admin</a>
                                </li>
                                <li>
                                    <i class="fas fa-calendar"></i>
                                    <a href="#">{date}</a>
                                </li>
                            </ul>

                            <div class="prose">
                                <Content />
                            </div>
                        </div>
                    </div>
                    <!--/.blog-single-->
                </div>
                <!--/.col-lg-8-->

                <div class="col-lg-4 padding-15">
                    <div class="sidebar-wrap">
                        <div class="widget-content">
                            <form action="" class="search-form">
                                <input
                                    type="text"
                                    class="form-control"
                                    placeholder="Type here"
                                />
                                <button class="search-btn" type="button"
                                    ><i class="fa fa-search"></i></button
                                >
                            </form>
                        </div>
                        <div class="widget-content">
                            <h4>Katagori</h4>
                            <ul class="widget-links">
                                <li><a href="#">Seragam Kerja</a></li>
                                <li><a href="#">Seragam Medis</a></li>
                                <li><a href="#">Seragam Restoran</a></li>
                                <li><a href="#">Seragam Kampus</a></li>
                                <li><a href="#">Seragam Hotel</a></li>
                                <li><a href="#">Seragam Sekolah</a></li>
                            </ul>
                        </div>
                        <!--
                        <div class="widget-content">
                            <h4>Tag Clouds</h4>
                            <ul class="tags">
                                <li><a href="#">Architecture</a></li>
                                <li><a href="#">Interior Design</a></li>
                                <li><a href="#">Designing</a></li>
                                <li><a href="#">Construction</a></li>
                                <li><a href="#">Buildings</a></li>
                                <li><a href="#">Industrial</a></li>
                                <li><a href="#">Factory</a></li>
                                <li><a href="#">Material</a></li>
                            </ul>
                        </div>-->
                    </div>
                    <!--/.sidebar-wrap-->
                </div>
                <!--/.col-lg-4-->
            </div>
            <!--/.blog-wrap-->
        </div>
    </section>
</Layout>
